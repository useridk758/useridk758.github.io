<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEBULA | P*XIESS EDITION</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;900&family=JetBrains+Mono&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --accent: #00d2ff; 
            --glow: rgba(0, 210, 255, 0.6);
            --bg: #000000;
            --panel: rgba(10, 10, 10, 0.95);
            --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* --- GLOBAL TRANSITIONS & RESET --- */
        * { 
            margin: 0; padding: 0; box-sizing: border-box; 
            font-style: normal !important; 
            cursor: none !important; /* Hide real mouse for the dot */
            transition: var(--transition);
        }

        body { 
            background: var(--bg); color: #fff; 
            font-family: 'Inter', sans-serif; 
            overflow: hidden; height: 100vh;
        }

        /* --- THE DOT CURSOR --- */
        #dot-cursor {
            position: fixed; width: 6px; height: 6px; 
            background: var(--accent); border-radius: 50%;
            z-index: 10000000; pointer-events: none;
            box-shadow: 0 0 12px var(--accent), 0 0 20px var(--accent);
            transform: translate(-50%, -50%);
            transition: transform 0.05s linear, width 0.3s, height 0.3s;
        }

        /* --- ANIMATIONS --- */
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes starScroll { from { transform: translateY(0); } to { transform: translateY(-1000px); } }

        .anim-fade { animation: fadeIn 0.6s var(--transition); }
        .anim-slide { animation: slideUp 0.5s var(--transition); }

        /* --- BOOT SYSTEM --- */
        #boot-portal { 
            position: fixed; inset: 0; background: #000; z-index: 999999; 
            display: flex; align-items: center; justify-content: center; 
        }
        .boot-box { 
            width: 450px; padding: 60px; text-align: center;
            background: var(--panel); border: 1px solid #1a1a1a; border-radius: 30px;
        }
        .rail { width: 100%; height: 2px; background: #111; margin-top: 30px; border-radius: 2px; overflow: hidden; }
        .fill { width: 0%; height: 100%; background: var(--accent); box-shadow: 0 0 15px var(--accent); }

        /* --- MAIN UI SCALING --- */
        #nebula-main-text { 
            font-size: 12vw; /* Reduced size */
            font-weight: 900; letter-spacing: -0.05em;
            filter: drop-shadow(0 0 50px var(--glow));
        }

        /* --- DOCK SCALING --- */
        #dock { 
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); 
            display: flex; gap: 12px; background: rgba(255,255,255,0.05);
            padding: 10px; border-radius: 20px; backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.1); z-index: 1000;
        }
        .dock-btn { 
            width: 45px; height: 45px; /* Smaller buttons */
            background: #0a0a0a; border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            font-size: 18px; border: 1px solid #222;
        }
        .dock-btn:hover { background: var(--accent); color: #000; transform: translateY(-5px); }

        /* --- SMALL SQUARE GAMES GRID --- */
        .game-matrix { 
            display: grid; 
            grid-template-cols: repeat(auto-fill, minmax(100px, 1fr)); /* Small icons */
            gap: 12px; padding: 20px;
        }
        .game-square { 
            aspect-ratio: 1/1; background: #080808; border-radius: 12px; 
            overflow: hidden; border: 1px solid #1a1a1a; position: relative;
        }
        .game-square:hover { outline: 2px solid var(--accent); transform: scale(1.05); z-index: 10; }
        .game-square img { width: 100%; height: 100%; object-fit: cover; }
        .game-name { 
            position: absolute; bottom: 0; width: 100%; font-size: 8px; 
            background: rgba(0,0,0,0.8); padding: 4px; text-align: center; font-weight: 900;
        }

        /* --- LAYERS --- */
        .neb-layer { 
            position: fixed; inset: 0; background: rgba(0,0,0,0.98); 
            z-index: 5000; display: none; opacity: 0; 
            align-items: center; justify-content: center; backdrop-filter: blur(30px);
        }
        .neb-layer.active { display: flex; opacity: 1; }

        /* --- P*XIESS SEARCH --- */
        #pxiess-bar {
            width: 600px; padding: 25px; background: #0a0a0a; border-radius: 50px;
            border: 1px solid #222; text-align: center; font-size: 20px;
            outline: none; font-weight: 900;
        }
        #pxiess-bar:focus { border-color: var(--accent); box-shadow: 0 0 30px var(--glow); }

        /* --- IFRAME WORKSPACE --- */
        #workspace { position: fixed; inset: 0; z-index: 4000; display: none; background: #000; }
        #workspace iframe { width: 100%; height: 100%; border: none; }

        #hud { 
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
            display: flex; gap: 30px; background: #050505; padding: 12px 40px;
            border-radius: 50px; border: 1px solid #222; z-index: 6000; opacity: 0; pointer-events: none;
        }
        #hud.visible { opacity: 1; pointer-events: all; }
    </style>
</head>
<body oncontextmenu="Core.openCtx(event)">

    <div id="dot-cursor"></div>
    <canvas id="stars" class="fixed inset-0 -z-10"></canvas>

    <div id="ctx" class="fixed z-[100000] bg-[#0a0a0a] border border-[#222] p-2 rounded-xl w-48 opacity-0 pointer-events-none scale-95 transition-all">
        <div class="p-3 hover:bg-cyan-500 hover:text-black rounded-lg text-[10px] font-black cursor-pointer flex justify-between" onclick="Core.home()">DASHBOARD <span>üè†</span></div>
        <div class="p-3 hover:bg-cyan-500 hover:text-black rounded-lg text-[10px] font-black cursor-pointer flex justify-between" onclick="Core.open('games')">GAMES <span>üéÆ</span></div>
        <div class="p-3 hover:bg-cyan-500 hover:text-black rounded-lg text-[10px] font-black cursor-pointer flex justify-between" onclick="Core.open('pxiess')">P*XIESS <span>üîç</span></div>
    </div>

    <div id="boot-portal">
        <div class="boot-box anim-fade">
            <h1 class="text-5xl font-black italic tracking-tighter mb-2">NEBULA</h1>
            <p class="text-[9px] font-black text-white/20 tracking-[10px] mb-10">CORE V20.0</p>
            <input type="text" id="user-in" placeholder="SYSTEM ID..." class="bg-transparent border-b border-white/10 w-full p-3 outline-none mb-8 text-xl font-black text-center uppercase focus:border-cyan-500">
            <button onclick="Core.boot()" class="w-full py-4 bg-white text-black font-black rounded-xl hover:bg-cyan-500 transition-all">INITIALIZE</button>
            <div id="load-wrap" class="hidden">
                <div class="rail"><div id="fill" class="fill"></div></div>
                <p id="status" class="text-[8px] font-black text-cyan-500 mt-4 tracking-widest uppercase">Syncing Protocols...</p>
            </div>
        </div>
    </div>

    <main id="desktop" class="absolute inset-0 flex items-center justify-center opacity-0 scale-95 transition-all duration-1000">
        <h1 id="nebula-main-text" class="italic">NEBULA</h1>
    </main>

    <div id="pxiess-layer" class="neb-layer" onclick="Core.close()">
        <div class="text-center anim-slide" onclick="event.stopPropagation()">
            <h1 class="text-8xl font-black mb-10 tracking-tighter">P*XIESS</h1>
            <input type="text" id="pxiess-bar" placeholder="SEARCH THE VOID..." onkeypress="if(event.key==='Enter')Core.launch(this.value)">
        </div>
    </div>

    <div id="games-layer" class="neb-layer" onclick="Core.close()">
        <div class="w-[80%] h-[70vh] bg-[#050505] border border-white/10 rounded-[30px] overflow-hidden anim-slide" onclick="event.stopPropagation()">
            <div class="p-6 border-b border-white/5 flex justify-between items-center">
                <span class="font-black italic text-xl">GAME ARCHIVE</span>
                <span class="text-[10px] font-black opacity-40">A-Z DATABASE</span>
            </div>
            <div class="game-matrix" id="game-inject">
                </div>
        </div>
    </div>

    <div id="hud">
        <button class="text-[10px] font-black hover:text-cyan-500" onclick="Core.home()">EXIT</button>
        <button class="text-[10px] font-black hover:text-cyan-500" onclick="Core.open('games')">GAMES</button>
        <button class="text-[10px] font-black hover:text-cyan-500" onclick="Core.open('pxiess')">P*XIESS</button>
    </div>

    <div id="workspace"><iframe id="view"></iframe></div>

    <div id="dock" class="opacity-0 translate-y-20 transition-all duration-1000">
        <div class="dock-btn" onclick="Core.home()">üè†</div>
        <div class="dock-btn" onclick="Core.open('pxiess')">üîç</div>
        <div class="dock-btn" onclick="Core.open('games')">üéÆ</div>
        <div class="dock-btn" onclick="location.reload()">üîÑ</div>
    </div>

    <script>
        // Massive Data Set for Squares
        const DB = [
            { n: "1v1.LOL", i: "https://images.crazygames.com/1v1-lol/20220913134354/1v1-lol-cover?auto=format,compress&q=75&cs=strip&ch=DPR&w=120&h=120&fit=crop", u: "https://1v1.lol" },
            { n: "Slope", i: "https://images.crazygames.com/slope/20201026111306/slope-cover?auto=format,compress&q=75&cs=strip&ch=DPR&w=120&h=120&fit=crop", u: "https://html5games.com/game/Slope" },
            { n: "OvO", i: "https://images.crazygames.com/ovo/20201026111306/ovo-cover?auto=format,compress&q=75&cs=strip&ch=DPR&w=120&h=120&fit=crop", u: "https://html5games.com/game/Ovo" },
            { n: "BitLife", i: "https://images.crazygames.com/bitlife-life-simulator/20231127092955/bitlife-life-simulator-cover?auto=format,compress&q=75&cs=strip&ch=DPR&w=120&h=120&fit=crop", u: "https://html5games.com/game/BitLife" },
            { n: "Moto X3M", i: "https://images.crazygames.com/moto-x3m/20201026111306/moto-x3m-cover?auto=format,compress&q=75&cs=strip&ch=DPR&w=120&h=120&fit=crop", u: "https://html5games.com/game/Moto-X3M" },
            { n: "Vex 7", i: "https://images.crazygames.com/vex-7/20221017101413/vex-7-cover?auto=format,compress&q=75&cs=strip&ch=DPR&w=120&h=120&fit=crop", u: "https://html5games.com/game/Vex-7" },
            { n: "Retro Bowl", i: "https://images.crazygames.com/retro-bowl/20220204111306/retro-bowl-cover?auto=format,compress&q=75&cs=strip&ch=DPR&w=120&h=120&fit=crop", u: "https://html5games.com/game/Retro-Bowl" },
            { n: "Tunnel Rush", i: "https://images.crazygames.com/tunnel-rush/20201026111306/tunnel-rush-cover?auto=format,compress&q=75&cs=strip&ch=DPR&w=120&h=120&fit=crop", u: "https://html5games.com/game/Tunnel-Rush" },
            { n: "Geometry Dash", i: "https://images.crazygames.com/geometry-dash-online/20201026111306/geometry-dash-online-cover?auto=format,compress&q=75&cs=strip&ch=DPR&w=120&h=120&fit=crop", u: "https://html5games.com/game/Geometry-Dash-Lite" },
            { n: "Subway Surfers", i: "https://images.crazygames.com/subway-surfers/20240112101413/subway-surfers-cover?auto=format,compress&q=75&cs=strip&ch=DPR&w=120&h=120&fit=crop", u: "https://html5games.com/game/Subway-Surfers" },
            { n: "Basket Stars", i: "https://images.crazygames.com/basketball-stars/20201026111306/basketball-stars-cover?auto=format,compress&q=75&cs=strip&ch=DPR&w=120&h=120&fit=crop", u: "https://html5games.com/game/Basketball-Stars" },
            { n: "Paper.io 2", i: "https://images.crazygames.com/paper-io-2/20201026111306/paper-io-2-cover?auto=format,compress&q=75&cs=strip&ch=DPR&w=120&h=120&fit=crop", u: "https://paper-io.com" }
        ];

        const Core = {
            init() {
                // Precision Dot Cursor Logic
                const dot = document.getElementById('dot-cursor');
                window.addEventListener('mousemove', (e) => {
                    dot.style.left = e.clientX + 'px';
                    dot.style.top = e.clientY + 'px';
                });

                window.addEventListener('mousedown', () => { dot.style.transform = 'translate(-50%, -50%) scale(2)'; dot.style.background = '#fff'; });
                window.addEventListener('mouseup', () => { dot.style.transform = 'translate(-50%, -50%) scale(1)'; dot.style.background = 'var(--accent)'; });

                // Starfield Engine
                const c = document.getElementById('stars');
                const ctx = c.getContext('2d');
                let s = [];
                const resize = () => { c.width = window.innerWidth; c.height = window.innerHeight; };
                window.onresize = resize; resize();

                for(let i=0; i<150; i++) s.push({x: Math.random()*c.width, y: Math.random()*c.height, r: Math.random()*1.2, v: Math.random()*0.3});
                const draw = () => {
                    ctx.clearRect(0,0,c.width,c.height);
                    ctx.fillStyle = "#fff";
                    s.forEach(star => {
                        ctx.beginPath(); ctx.arc(star.x, star.y, star.r, 0, Math.PI*2); ctx.fill();
                        star.y += star.v; if(star.y > c.height) star.y = 0;
                    });
                    requestAnimationFrame(draw);
                };
                draw();

                // Inject Games
                const matrix = document.getElementById('game-inject');
                DB.forEach(game => {
                    const div = document.createElement('div');
                    div.className = "game-square anim-fade";
                    div.innerHTML = `<img src="${game.i}"><div class="game-name">${game.n}</div>`;
                    div.onclick = () => this.launch(game.u);
                    matrix.appendChild(div);
                });
            },

            boot() {
                if(!document.getElementById('user-in').value) return;
                document.getElementById('load-wrap').classList.remove('hidden');
                let p = 0;
                const fill = document.getElementById('fill');
                const status = document.getElementById('status');
                
                const iv = setInterval(() => {
                    p += Math.random() * 8;
                    if(p >= 100) {
                        p = 100; clearInterval(iv);
                        this.enter();
                    }
                    fill.style.width = p + '%';
                    if(p > 40) status.innerText = "LINKING P*XIESS DATABASE...";
                    if(p > 80) status.innerText = "AUTHORIZING ACCESS...";
                }, 50);
            },

            enter() {
                document.getElementById('boot-portal').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('boot-portal').style.display = 'none';
                    document.getElementById('desktop').style.opacity = '1';
                    document.getElementById('desktop').style.transform = 'scale(1)';
                    document.getElementById('dock').style.opacity = '1';
                    document.getElementById('dock').style.transform = 'translateX(-50%) translateY(0)';
                }, 600);
            },

            open(type) {
                this.close();
                const layer = document.getElementById(type + '-layer');
                layer.style.display = 'flex';
                setTimeout(() => layer.classList.add('active'), 10);
            },

            close() {
                document.querySelectorAll('.neb-layer').forEach(l => {
                    l.classList.remove('active');
                    setTimeout(() => { if(!l.classList.contains('active')) l.style.display = 'none'; }, 400);
                });
                document.getElementById('ctx').style.opacity = '0';
                document.getElementById('ctx').style.pointerEvents = 'none';
            },

            launch(url) {
                if(!url) return;
                let t = url.includes('.') ? (url.startsWith('http') ? url : 'https://' + url) : 'https://www.google.com/search?q=' + encodeURIComponent(url);
                document.getElementById('view').src = t;
                document.getElementById('workspace').style.display = 'block';
                document.getElementById('hud').classList.add('visible');
                this.close();
            },

            home() {
                document.getElementById('workspace').style.display = 'none';
                document.getElementById('view').src = "";
                document.getElementById('hud').classList.remove('visible');
            },

            openCtx(e) {
                e.preventDefault();
                const ctx = document.getElementById('ctx');
                ctx.style.left = e.clientX + 'px';
                ctx.style.top = e.clientY + 'px';
                ctx.style.opacity = '1';
                ctx.style.pointerEvents = 'all';
                ctx.style.transform = 'scale(1)';
            }
        };

        window.onload = () => Core.init();
    </script>
</body>
</html>
