<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEBULA OS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@900&display=swap" rel="stylesheet">
    
    <style>
        :root { --theme: #3b82f6; --ease: cubic-bezier(0.16, 1, 0.3, 1); }
        
        * { 
            margin: 0; padding: 0; box-sizing: border-box; 
            font-style: normal !important; 
            cursor: none !important; /* Custom cursor only */
        }

        body { 
            background: #000; color: #fff; 
            font-family: 'Inter', sans-serif; 
            overflow: hidden; height: 100vh; 
        }

        /* --- VISIBLE CUSTOM CURSOR --- */
        #cursor-dot {
            position: fixed; width: 8px; height: 8px; background: #fff;
            border-radius: 50%; z-index: 100000; pointer-events: none;
            transition: transform 0.1s linear;
        }
        #cursor-ring {
            position: fixed; width: 34px; height: 34px; border: 2px solid var(--theme);
            border-radius: 50%; z-index: 99999; pointer-events: none;
            transition: transform 0.15s var(--ease), width 0.3s, height 0.3s;
        }

        /* --- UPDATE SCREEN (BIGGER) --- */
        #update-screen {
            position: fixed; inset: 0; background: #000; z-index: 20000;
            display: none; flex-direction: column; align-items: center; justify-content: center;
        }
        .update-container { width: 70%; max-width: 900px; transform: scale(1.2); }
        .bar-bg { width: 100%; height: 6px; background: rgba(255,255,255,0.1); border-radius: 10px; margin: 30px 0; overflow: hidden; }
        .bar-fill { width: 0%; height: 100%; background: #fff; box-shadow: 0 0 20px #fff; transition: width 0.1s linear; }

        /* --- HUD MENU (GAME/WEB MODE) --- */
        #hud {
            position: fixed; top: -100px; left: 50%; transform: translateX(-50%);
            z-index: 15000; background: rgba(10,10,10,0.9); backdrop-filter: blur(20px);
            padding: 15px 40px; border-radius: 0 0 20px 20px; border: 1px solid #222;
            display: flex; gap: 30px; transition: top 0.6s var(--ease);
        }
        #hud.visible { top: 0; }
        .hud-item { font-size: 11px; font-weight: 900; letter-spacing: 2px; opacity: 0.6; transition: 0.3s; }
        .hud-item:hover { opacity: 1; color: var(--theme); }

        /* --- MAIN HERO --- */
        .hero-text {
            font-size: 16vw; font-weight: 900; text-transform: uppercase;
            background: linear-gradient(to bottom, #fff, #444);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 60px rgba(255,255,255,0.1));
            user-select: none;
        }

        /* --- LAYERS --- */
        .layer {
            position: fixed; inset: 0; background: rgba(0,0,0,0.98);
            z-index: 10000; display: none; align-items: center; justify-content: center;
            opacity: 0; transition: opacity 0.5s var(--ease);
        }
        .layer.active { display: flex; opacity: 1; }

        #workspace { position: fixed; inset: 0; z-index: 5000; display: none; }
        #workspace iframe { width: 100%; height: 100%; border: none; }

        .game-grid { display: grid; grid-template-cols: repeat(4, 1fr); gap: 20px; width: 80%; }
        .game-item { aspect-ratio: 1; background: #111; border: 1px solid #222; border-radius: 15px; position: relative; overflow: hidden; transition: 0.4s var(--ease); }
        .game-item:hover { transform: translateY(-10px); border-color: var(--theme); }
        .game-item img { width: 100%; height: 100%; object-fit: cover; opacity: 0.5; }
    </style>
</head>
<body>

    <div id="cursor-dot"></div>
    <div id="cursor-ring"></div>

    <div id="hud">
        <div class="hud-item" onclick="OS.goHome()">HOME</div>
        <div class="hud-item" onclick="OS.openLayer('search-layer')">PROXY</div>
        <div class="hud-item" onclick="OS.openLayer('games-layer')">GAMES</div>
    </div>

    <div id="login-gate" class="fixed inset-0 bg-black z-[30000] flex items-center justify-center">
        <input type="text" id="name-input" class="bg-transparent border-none text-8xl font-black text-center outline-none w-full placeholder-white/5 uppercase" placeholder="ENTER NAME" onkeypress="if(event.key==='Enter')OS.runUpdate()">
    </div>

    <div id="update-screen">
        <div class="update-container">
            <h1 class="text-5xl font-black italic mb-2">SYSTEM UPDATE</h1>
            <p id="status-text" class="text-xs font-black tracking-widest text-blue-500 uppercase">Verifying Kernel...</p>
            <div class="bar-bg"><div id="bar-fill" class="bar-fill"></div></div>
            <div class="flex justify-between text-[10px] font-black text-white/30 uppercase">
                <div>Package: NEBULA_CORE_V15.2<br>Status: Heavy Loading</div>
                <div class="text-right">DO NOT REFRESH PAGE<br>Initializing Virtual Environment...</div>
            </div>
        </div>
    </div>

    <div id="desktop" class="absolute inset-0 flex items-center justify-center opacity-0 transition-all duration-1000">
        <h1 class="hero-text">NEBULA</h1>
    </div>

    <div id="search-layer" class="layer" onclick="OS.closeAll()">
        <div class="w-full max-w-4xl text-center" onclick="event.stopPropagation()">
            <h1 class="text-[130px] font-black leading-[0.8] mb-12">NEBU<br>PR*XY</h1>
            <input type="text" id="search-input" class="bg-[#111] border border-[#222] w-full p-6 rounded-full text-center outline-none text-xl font-bold" placeholder="BROWSE ANONYMOUSLY" onkeypress="if(event.key==='Enter')OS.browse()">
        </div>
    </div>

    <div id="games-layer" class="layer" onclick="OS.closeAll()">
        <div class="game-grid" onclick="event.stopPropagation()" id="game-list">
            </div>
    </div>

    <div id="workspace"><iframe id="web-frame" src=""></iframe></div>

    <div id="dock" class="fixed bottom-[-100px] left-1/2 -translate-x-1/2 z-[8000] transition-all duration-700">
        <div class="flex gap-4 p-2 bg-white/5 border border-white/10 rounded-[22px] backdrop-blur-3xl">
            <div class="w-[44px] h-[44px] bg-[#0a0a0a] rounded-xl flex items-center justify-center text-lg" onclick="OS.goHome()">üè†</div>
            <div class="w-[44px] h-[44px] bg-[#0a0a0a] rounded-xl flex items-center justify-center text-lg" onclick="OS.openLayer('search-layer')">üîç</div>
            <div class="w-[44px] h-[44px] bg-[#0a0a0a] rounded-xl flex items-center justify-center text-lg" onclick="OS.openLayer('games-layer')">üéÆ</div>
        </div>
    </div>

    <script>
        const GAMES_DB = [
            { n: "DRIFT HUNTERS", u: "https://html5games.com/game/Drift-Hunters", i: "https://images.crazygames.com/drift-hunters/20240222101413/drift-hunters-cover" },
            { n: "BASKET STARS", u: "https://html5games.com/game/Basketball-Stars", i: "https://images.crazygames.com/basketball-stars/20201026111306/basketball-stars-cover" },
            { n: "1V1 LOL", u: "https://1v1.lol", i: "https://images.crazygames.com/1v1-lol/20220913134354/1v1-lol-cover" },
            { n: "SLOPE", u: "https://html5games.com/game/Slope", i: "https://images.crazygames.com/slope/20201026111306/slope-cover" }
        ];

        class NebulaOS {
            constructor() { this.init(); }

            init() {
                // Mouse Follower
                window.onmousemove = (e) => {
                    document.getElementById('cursor-dot').style.transform = `translate(${e.clientX}px, ${e.clientY}px)`;
                    document.getElementById('cursor-ring').style.transform = `translate(${e.clientX - 17}px, ${e.clientY - 17}px)`;
                };

                this.loadGames();
            }

            runUpdate() {
                document.getElementById('login-gate').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('login-gate').style.display = 'none';
                    const screen = document.getElementById('update-screen');
                    screen.style.display = 'flex';
                    
                    let progress = 0;
                    const fill = document.getElementById('bar-fill');
                    const status = document.getElementById('status-text');

                    const interval = setInterval(() => {
                        progress += Math.random() * 2;
                        if(progress >= 100) {
                            progress = 100;
                            clearInterval(interval);
                            this.bootDesktop();
                        }
                        fill.style.width = progress + '%';
                        if(progress > 20) status.innerText = "INITIALIZING CORE PROXY...";
                        if(progress > 50) status.innerText = "LOADING GAMES DATABASE...";
                        if(progress > 80) status.innerText = "BYPASSING FIREWALLS...";
                    }, 50);
                }, 500);
            }

            bootDesktop() {
                setTimeout(() => {
                    document.getElementById('update-screen').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('update-screen').style.display = 'none';
                        document.getElementById('desktop').style.opacity = '1';
                        document.getElementById('dock').style.bottom = '30px';
                    }, 500);
                }, 500);
            }

            loadGames() {
                const list = document.getElementById('game-list');
                GAMES_DB.forEach(g => {
                    const el = document.createElement('div');
                    el.className = "game-item";
                    el.innerHTML = `<img src="${g.i}"><div class="absolute inset-0 flex items-center justify-center text-[10px] font-black">${g.n}</div>`;
                    el.onclick = () => this.browse(g.u);
                    list.appendChild(el);
                });
            }

            browse(url) {
                let v = url || document.getElementById('search-input').value;
                if(!v) return;
                v = v.includes('.') ? (v.startsWith('http') ? v : 'https://' + v) : 'https://www.google.com/search?q=' + encodeURIComponent(v);
                
                document.getElementById('web-frame').src = v;
                document.getElementById('workspace').style.display = 'block';
                document.getElementById('hud').classList.add('visible');
                document.getElementById('dock').style.bottom = '-100px';
                this.closeAll();
            }

            goHome() {
                document.getElementById('workspace').style.display = 'none';
                document.getElementById('web-frame').src = "";
                document.getElementById('hud').classList.remove('visible');
                document.getElementById('dock').style.bottom = '30px';
            }

            openLayer(id) {
                this.closeAll();
                const el = document.getElementById(id);
                el.style.display = 'flex';
                setTimeout(() => el.classList.add('active'), 10);
            }

            closeAll() {
                document.querySelectorAll('.layer').forEach(l => {
                    l.classList.remove('active');
                    setTimeout(() => { if(!l.classList.contains('active')) l.style.display = 'none'; }, 500);
                });
            }
        }

        const OS = new NebulaOS();
    </script>
</body>
</html>
