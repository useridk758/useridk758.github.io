<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEBULA OS | PATCH 8.9</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;900&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --theme-main: #3b82f6;
            --m-x: 0px;
            --m-y: 0px;
            --r-x: 0px;
            --r-y: 0px;
            --bg: #020202;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; cursor: none !important; user-select: none; }
        body { background: var(--bg); color: #fff; font-family: 'Inter', sans-serif; overflow: hidden; height: 100vh; }

        /* --- THE FIXED MOUSE KERNEL --- */
        #c-dot {
            position: fixed; top: 0; left: 0; width: 5px; height: 5px; background: #fff; border-radius: 50%; z-index: 10000; pointer-events: none;
            transform: translate3d(var(--m-x), var(--m-y), 0);
            transition: transform 0.05s linear;
        }
        #c-ring {
            position: fixed; top: 0; left: 0; width: 35px; height: 35px; border: 1.5px solid var(--theme-main); border-radius: 50%; z-index: 9999; pointer-events: none;
            transform: translate3d(calc(var(--r-x) - 15px), calc(var(--r-y) - 15px), 0);
            transition: width 0.3s, height 0.3s, background 0.3s, border-color 0.3s;
        }
        .hover-state #c-ring { width: 55px; height: 55px; background: rgba(59, 130, 246, 0.2); border-color: transparent; }

        /* --- UI ARCHITECTURE --- */
        #canvas-plane { position: fixed; inset: 0; z-index: -1; }
        #os-ui { position: relative; z-index: 100; height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: opacity 1s; }
        
        .dock { position: fixed; top: 30px; display: flex; gap: 15px; background: rgba(10,10,10,0.8); padding: 10px 25px; border-radius: 100px; border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(20px); }
        .btn { width: 45px; height: 45px; background: #111; border-radius: 12px; display: flex; align-items: center; justify-content: center; border: 1px solid #222; transition: 0.3s; }
        .btn:hover { border-color: var(--theme-main); transform: translateY(-3px); }

        .hero-title { font-size: 10vw; font-weight: 900; font-style: italic; text-transform: uppercase; background: linear-gradient(to bottom, #fff, #333); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        /* --- WINDOWS --- */
        .win { position: fixed; inset: 50px; background: #080808; border: 1px solid #222; border-radius: 30px; display: none; flex-direction: column; z-index: 500; overflow: hidden; }
        .win.active { display: flex; }
        .win-bar { padding: 15px 30px; border-bottom: 1px solid #222; display: flex; justify-content: space-between; align-items: center; }

        #boot { position: fixed; inset: 0; background: #000; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; }
    </style>
</head>
<body>

    <canvas id="canvas-plane"></canvas>
    <div id="c-dot"></div>
    <div id="c-ring"></div>

    <div id="boot">
        <h1 class="text-blue-500 font-black italic text-3xl">NEBULA 8.9</h1>
        <p class="text-[8px] font-mono mt-4 tracking-[5px] text-gray-600">RECALIBRATING INPUT ENGINES...</p>
    </div>

    <header class="dock">
        <div class="btn hoverable" onclick="location.reload()">üè†</div>
        <div class="btn hoverable" onclick="toggleWin('win-search')">üîç</div>
        <div class="btn hoverable" onclick="openProxy('https://cineby.gd')">üé¨</div>
        <div class="btn hoverable" onclick="toggleWin('win-settings')">‚öôÔ∏è</div>
    </header>

    <main id="os-ui">
        <h1 class="hero-title">USERIDK</h1>
        <div class="flex gap-12 mt-10">
            <div class="text-center"><p class="text-2xl font-black" id="fps">60</p><p class="text-[8px] uppercase text-blue-500 font-black">Sync Speed</p></div>
            <div class="text-center"><p class="text-2xl font-black" id="ping">12</p><p class="text-[8px] uppercase text-blue-500 font-black">Input MS</p></div>
        </div>
    </main>

    <section id="win-search" class="win">
        <div class="win-bar"><span class="text-xs font-black uppercase tracking-widest">Search Module</span><button onclick="toggleWin('win-search')">CLOSE</button></div>
        <div class="p-20">
            <input type="text" class="w-full bg-[#111] border border-[#222] p-6 rounded-2xl text-white font-mono hoverable" placeholder="Tunnel Address..." id="url-in">
            <button class="mt-6 w-full py-4 bg-blue-600 rounded-xl font-black hoverable" onclick="runSearch()">EXECUTE BYPASS</button>
        </div>
    </section>

    <div id="proxy-box" class="win">
        <div class="win-bar"><span id="proxy-title">PORTAL</span><button onclick="closeProxy()">EXIT</button></div>
        <iframe id="proxy-frame" class="w-full h-full bg-white"></iframe>
    </div>

    <script>
        const root = document.documentElement;
        let mouse = { x: 0, y: 0 };
        let ring = { x: 0, y: 0 };

        // 1. STABLE MOUSE TRACKING
        window.addEventListener('mousemove', (e) => {
            mouse.x = e.clientX;
            mouse.y = e.clientY;
            root.style.setProperty('--m-x', `${mouse.x}px`);
            root.style.setProperty('--m-y', `${mouse.y}px`);
        });

        // 2. SMOOTH RING FOLLOW (Lerp Physics)
        function updateRing() {
            ring.x += (mouse.x - ring.x) * 0.15;
            ring.y += (mouse.y - ring.y) * 0.15;
            root.style.setProperty('--r-x', `${ring.x}px`);
            root.style.setProperty('--r-y', `${ring.y}px`);
            requestAnimationFrame(updateRing);
        }
        updateRing();

        // 3. HOVER LOGIC
        document.querySelectorAll('.hoverable').forEach(el => {
            el.addEventListener('mouseenter', () => document.body.classList.add('hover-state'));
            el.addEventListener('mouseleave', () => document.body.classList.remove('hover-state'));
        });

        // 4. BOOT SEQUENCE
        setTimeout(() => {
            document.getElementById('boot').style.opacity = '0';
            setTimeout(() => document.getElementById('boot').style.display = 'none', 1000);
        }, 1500);

        // 5. WINDOW LOGIC
        function toggleWin(id) {
            const w = document.getElementById(id);
            w.classList.toggle('active');
        }

        function openProxy(url) {
            const pb = document.getElementById('proxy-box');
            document.getElementById('proxy-frame').src = url;
            pb.classList.add('active');
            document.getElementById('os-ui').style.opacity = '0';
        }

        function closeProxy() {
            document.getElementById('proxy-box').classList.remove('active');
            document.getElementById('os-ui').style.opacity = '1';
        }

        function runSearch() {
            let v = document.getElementById('url-in').value;
            if(!v.startsWith('http')) v = 'https://' + v;
            openProxy(v);
        }

        // 6. BACKGROUND ENGINE
        const canvas = document.getElementById('canvas-plane');
        const ctx = canvas.getContext('2d');
        let stars = [];
        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.onresize = resize; resize();

        for(let i=0; i<200; i++) stars.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, s: Math.random()*2});
        function draw() {
            ctx.fillStyle = '#020202'; ctx.fillRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = '#fff';
            stars.forEach(s => {
                ctx.beginPath(); ctx.arc(s.x, s.y, s.s, 0, Math.PI*2); ctx.fill();
                s.y += 0.2; if(s.y > canvas.height) s.y = 0;
            });
            requestAnimationFrame(draw);
        }
        draw();

        // METRICS
        setInterval(() => {
            document.getElementById('ping').innerText = Math.floor(Math.random() * 4 + 8);
        }, 3000);
    </script>
</body>
</html>
